<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  
  <style>
    i {
      font-size: 45px;}
    

    [box-id] {
      height: 80px;
      display: flex;
      justify-content: center;
      align-items: center;
      border: none;
      transition: 0.3s;
    }

    [box-id].active {
      border: 5px solid rgb(219, 219, 219);
      box-shadow: 0 0 20px rgb(31, 31, 31);
      transition: 0s;
    }

    #msg {
      font-size: 36px;
      text-align: center;
    }
    .movie{
      text-align: center;
      font-size: 40px;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div class="111"><i class="fa-sharp fa-solid fa-popcorn fa-5x" style="font-size: 500px;"></i></div>
  <div class="container">
    <div class="row">
      <div box-id="1" class="col-1"></div>
      <div box-id="2" class="col-1"></div>
      <div box-id="3" class="col-1"></div>
      <div box-id="4" class="col-1"></div>
      <div box-id="5" class="col-1"></div>
      <div box-id="6" class="col-1"></div>
      <div box-id="7" class="col-1"></div>
      <div box-id="8" class="col-1"></div>
      <div box-id="9" class="col-1"></div>
      <div box-id="10" class="col-1"></div>
      <div box-id="11" class="col-1"></div>
      <div box-id="12" class="col-1"></div>
    </div>
    <div class="row">
      <div box-id="32" class="col-1"></div>
      <div class="col-10"></div>
      <div box-id="13" class="col-1"></div>
    </div>
    <div class="row">
      <div box-id="31" class="col-1"></div>
      <div class="col-10 m-auto">
        <p class="m-0 movie">經典電影</p>
      </div>
      <div box-id="14" class="col-1"></div>
    </div>
    <div class="row">
      <div box-id="30" class="col-1"></div>
      <div class="col-10 m-auto">
        <p id="msg" class="m-0"></p>
      </div>
      <div box-id="15" class="col-1"></div>
    </div>
    <div class="row">
      <div box-id="29" class="col-1"></div>
      <div class="col-10">

      </div>
      <div box-id="16" class="col-1"></div>
    </div>
    <div class="row">
      <div box-id="28" class="col-1"></div>
      <div box-id="27" class="col-1"></div>
      <div box-id="26" class="col-1"></div>
      <div box-id="25" class="col-1"></div>
      <div box-id="24" class="col-1"></div>
      <div box-id="23" class="col-1"></div>
      <div box-id="22" class="col-1"></div>
      <div box-id="21" class="col-1"></div>
      <div box-id="20" class="col-1"></div>
      <div box-id="19" class="col-1"></div>
      <div box-id="18" class="col-1"></div>
      <div box-id="17" class="col-1"></div>
    </div>
    <!-- button -->
    <div class="row mt-5">
      <div class="col-12">
        <button class="btn btn-dark w-100 rounded-pill">start</button>
      </div>
    </div>
    <div class="row mt-5">
      <div class="col-12">
        <img class="movImg" src="" alt="">
      </div>
    </div>
  </div>
  <script src="https://kit.fontawesome.com/9d1691e7f3.js" crossorigin="anonymous"></script>
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script>
    // 宣告
    // 格子資料
    let brickData = [
      {
        id: '1',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '	刺激1995'
        }
      },
      {
        id: '2',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '教父'
        }
      },
      {
        id: '3',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '黑暗騎士'
        }
      },
      {
        id: '4',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '十二怒漢'
        }
      },
      {
        id: '5',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '辛德勒的名單'
        }
      },
      {
        id: '6',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '魔戒三部曲:王者再臨'
        }
      },
      {
        id: '7',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '黑色追緝令'
        }
      },
      {
        id: '8',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '魔戒首部曲:魔戒現身'
        }
      },
      {
        id: '9',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '	黃昏三鏢客'
        }
      },
      {
        id: '10',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '	阿甘正傳'
        }
      },
      {
        id: '11',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '鬥陣俱樂部'
        }
      },
      {
        id: '12',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '	全面啟動'
        }
      },
      {
        id: '13',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '魔戒二部曲:雙城奇謀'
        }
      },
      {
        id: '14',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '星際大戰五部曲:帝國大反擊'
        }
      },
      {
        id: '15',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '駭客任務'
        }
      },
      {
        id: '16',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '	四海好傢伙'
        }
      },
      {
        id: '17',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '	飛越杜鵑窩'
        }
      },
      {
        id: '18',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '	火線追緝令'
        }
      },
      {
        id: '19',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '七武士'
        }
      },
      {
        id: '20',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '	風雲人物'
        }
      },
      {
        id: '21',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '沉默的羔羊'
        }
      },
      {
        id: '22',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '	無法無天'
        }
      },
      {
        id: '23',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '搶救雷恩大兵'
        }
      },
      {
        id: '24',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '	美麗人生'
        }
      },
      {
        id: '25',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '	綠色奇蹟'
        }
      },
      {
        id: '26',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '	星際效應'
        }
      },
      {
        id: '27',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '星際大戰'
        }
      },
      {
        id: '28',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '	魔鬼終結者2'
        }
      },
      {
        id: '29',
        color: 'gray',
        icon: 'fa-solid fa-film',
        target: function () {
          return '回到未來'
        }
      },
      {
        id: '30',
        color: '#555555',
        icon: 'fa-solid fa-video',
        target: function () {
          return '	神隱少女'
        }
      },
      {
        id: '31',
        color: '#d3d3d3',
        icon: 'fa-solid fa-ticket',
        target: function () {
          return '	驚魂記'
        }
      },
      {
        id: '32',
        color: '#2d2d2d',
        icon: 'fa-solid fa-clapperboard',
        target: function () {
          return '	戰地琴人'
        }
      }

    ]
    let steps = 0 //剩餘步數
    let allSteps = 0 //全部步數
    let current = 0 //目前走到哪一格
    let bricks
    let speed//速率(越大越慢)
    // DOM
    const startBtn = document.querySelector('button')
    const msgBox = document.getElementById("msg")
    // function
    function renderBrick() {
      bricks = document.querySelectorAll('[box-id]')
      bricks = Array.from(bricks).sort((a, b) => {
        return a.getAttributeNode('box-id').value - b.getAttributeNode('box-id').value
      })
      bricks.forEach(x => {
        let id = x.getAttributeNode('box-id').value
        let data = brickData.find(x => x.id == id)
        let icon = document.createElement('i')
        icon.setAttribute('class', data.icon)
        icon.style.color = data.color
        x.appendChild(icon)
      })
    }

    function go() {
      speed = 50
      let random = Math.floor(Math.random() * brickData.length) + 1
      // steps = random
      steps = random + (3 * bricks.length)//V2 多跑幾圈
      allSteps = steps
      turnAround()
    }

    function turnAround() {
      bricks[current].classList.remove('active')
      current++

      if (current >= bricks.length) current = 0
      bricks[current].classList.add('active')
      steps--

      if (steps > 0) {
        // 還沒走完
        setTimeout(turnAround, speed)
        //當剩餘步數剩下三分之一的時候減速度
        if (steps < Math.floor((allSteps / 3))) speed += 7  //變數效果
      }
      else {
        // 走完了
        msgBox.innerText = brickData[current].target()
      }
    }
    // window.onload
    window.onload = function () {
      renderBrick();
      startBtn.onclick = function () {
        go()
      }
    }
  </script>
</body>

</html>